(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-924ce03c"],{"09a6":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("Alert"),s("div",{staticClass:"container checkout"},[t._m(0),s("div",{staticClass:"row my-5"},[t.cartList.carts.length<1?s("div",{staticClass:"col-12 my-5"},[s("h6",{staticClass:"mb-5 font-letter text-dark font-weight-bold text-center"},[t._v("\n          您的購物車內還沒有任何商品！\n          "),s("router-link",{staticClass:"btn btn-warning cursor-pointer font-weight-bold",attrs:{to:"/product"}},[t._v("快來逛逛")])],1),s("div",{staticClass:"row justify-content-center"},[t._m(1),t._l(t.products,function(e){return s("div",{directives:[{name:"show",rawName:"v-show",value:"熱門商品"===e.category,expression:"item.category === '熱門商品'"}],key:e.id,staticClass:"col-md-4 col-12 mb-3 text-dark detail",class:{"sellout-box":0===e.is_enabled}},[s("div",{staticClass:"card product-card bg-grass on-hover"},[s("div",{staticClass:"card-img-top banner cursor-pointer",style:{backgroundImage:"url('"+e.imageUrl+"')"},on:{click:function(s){return t.toProductPage(e.id)}}}),s("p",{staticClass:"p-3 mr-auto mb-0 h5 font-letter cursor-pointer",on:{click:function(s){return t.toProductPage(e.id)}}},[t._v(t._s(e.title))]),s("div",{staticClass:"card-body row no-gutters flex-wrap"},[s("div",{staticClass:"col m-0 d-flex align-items-end cursor-pointer",on:{click:function(s){return t.addtoCart(e.id)}}},[t._m(2,!0)]),s("p",{staticClass:"col d-flex flex-column justify-content-center text-right mb-0"},[s("del",{staticClass:"text-secondary h6"},[t._v(t._s(t._f("currency")(e.origin_price)))]),s("span",{staticClass:"text-danger font-weight-bold h5"},[t._v(t._s(t._f("currency")(e.price)))])])])])])})],2)]):t._e()]),t.cartList.carts.length>0?s("div",{staticClass:"row my-5"},[s("div",{staticClass:"col-md-5 col-12 mb-5 mb-md-0"},[s("h6",{staticClass:"font-letter text-dark mb-3 mt-4 font-weight-bold text-center text-md-left"},[t._v("\n          購物車清單\n          "),s("span",{staticClass:"badge badge-danger ml-2"},[t._v(t._s(t.cartList.carts.length))])]),s("ul",{staticClass:"d-md-flex flex-column meun p-0 mb-5"},t._l(t.cartList.carts,function(e){return s("li",{key:e.id,staticClass:"meun-list text-dark px-3 py-2 h6 row no-gutters"},[s("div",{staticClass:"col-3 cart-img banner",style:{backgroundImage:"url('"+e.product.imageUrl+"')"}}),s("div",{staticClass:"col-8 d-flex flex-column justify-content-center"},[s("div",{staticClass:"ml-3 mb-2"},[t._v("\n                "+t._s(e.product.title)+"\n                "),s("i",{staticClass:"fas fa-times"}),s("span",{staticClass:"h5 mb-0"},[t._v(t._s(e.qty))])]),s("div",{staticClass:"ml-3 text-orange"},[s("span",{staticClass:"small"},[t._v("小計")]),t._v("\n                "+t._s(t._f("currency")(e.final_total))+"\n                "),e.coupon?s("small",{staticClass:"text-grass ml-3 use-coupon d-none d-md-inline-block"},[t._v("已套用優惠劵")]):t._e()])]),s("div",{staticClass:"col-1 d-flex align-items-center"},[s("button",{staticClass:"btn btn-outline-danger btn-sm",on:{click:function(s){return s.preventDefault(),t.removeCart(e.id)}}},[s("i",{staticClass:"fas fa-trash-alt"})])])])}),0),t.cartList.final_total!==t.cartList.total?s("div",{staticClass:"row align-items-end mb-3"},[s("del",{staticClass:"col h5 mb-0 text-left text-secondary d-md-none"},[t._v("總金額 "+t._s(t._f("currency")(t.cartList.total)))]),s("div",{staticClass:"col h5 mb-0 text-left text-secondary d-none d-md-block"},[t._v("總金額 "+t._s(t._f("currency")(t.cartList.total)))]),s("div",{staticClass:"col h4 mb-0 text-right text-orange"},[t._v("折扣後金額 "+t._s(t._f("currency")(t.cartList.final_total)))])]):s("div",{staticClass:"row align-items-end mb-3"},[s("div",{staticClass:"col h4 mb-0 text-right text-orange"},[t._v("總金額 "+t._s(t._f("currency")(t.cartList.final_total)))])]),s("div",{staticClass:"input-group mb-3"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.coupon_code,expression:"coupon_code"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.coupon_code},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.addCupon(e)},input:function(e){e.target.composing||(t.coupon_code=e.target.value)}}}),s("div",{staticClass:"input-group-append"},[s("button",{staticClass:"btn btn-orange text-grass font-letter",attrs:{type:"button"},on:{click:t.addCupon}},[t._v("套用優惠碼")])]),s("p",{staticClass:"ml-2 mt-1 text-orange"},[t._v("慶開店！ 只要輸入： newopen168 ，即可立即享7折優惠！")])])]),s("div",{staticClass:"col-md col-12"},[s("form",{on:{submit:function(e){return e.preventDefault(),t.createOrder(e)}}},[s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"email"}},[t._v("收件人Email")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.email,expression:"form.user.email"},{name:"validate",rawName:"v-validate",value:"required|email",expression:"'required|email'"}],staticClass:"form-control",class:{"is-invalid":t.errors.has("email")},attrs:{type:"email",name:"email",id:"email"},domProps:{value:t.form.user.email},on:{input:function(e){e.target.composing||t.$set(t.form.user,"email",e.target.value)}}}),t.errors.has("email")?s("span",{staticClass:"text-danger"},[t._v(t._s(t.errors.first("email")))]):t._e()]),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"name"}},[t._v("收件人姓名")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.name,expression:"form.user.name"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{"is-invalid":t.errors.has("name")},attrs:{type:"text",name:"name",id:"name"},domProps:{value:t.form.user.name},on:{input:function(e){e.target.composing||t.$set(t.form.user,"name",e.target.value)}}}),t.errors.has("name")?s("span",{staticClass:"text-danger"},[t._v("您尚未填入收件人姓名")]):t._e()]),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"phone"}},[t._v("收件人電話")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.tel,expression:"form.user.tel"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{"is-invalid":t.errors.has("phone")},attrs:{type:"tel",name:"phone",id:"phone"},domProps:{value:t.form.user.tel},on:{input:function(e){e.target.composing||t.$set(t.form.user,"tel",e.target.value)}}}),t.errors.has("phone")?s("span",{staticClass:"text-danger"},[t._v("您尚未填入收件人電話")]):t._e()]),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"address"}},[t._v("收件人地址")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.address,expression:"form.user.address"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{"is-invalid":t.errors.has("address")},attrs:{type:"text",name:"address",id:"address"},domProps:{value:t.form.user.address},on:{input:function(e){e.target.composing||t.$set(t.form.user,"address",e.target.value)}}}),t.errors.has("address")?s("span",{staticClass:"text-danger"},[t._v("您尚未填入收件人地址")]):t._e()]),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"message"}},[t._v("備註")]),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.form.message,expression:"form.message"}],staticClass:"form-control",attrs:{name:"message",id:"message",rows:"3"},domProps:{value:t.form.message},on:{input:function(e){e.target.composing||t.$set(t.form,"message",e.target.value)}}})]),s("div",{staticClass:"text-right"},[s("button",{staticClass:"btn btn-outline-primary",attrs:{type:"button"},on:{click:t.createOrder}},[t._v("送出訂單")])])])])]):t._e()])],1)},r=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"row my-5 justify-content-center"},[s("div",{staticClass:"col-md-7 col-12"},[s("div",{staticClass:"row step"},[s("div",{staticClass:"col text-center step-point-line step-point"},[s("span",{staticClass:"bg-info px-4 py-2 rounded-pill\n            text-grass mb-3 d-inline-block"},[t._v("STEP 1")]),s("p",{staticClass:"text-info h6"},[t._v("確認訂單資料")])]),s("div",{staticClass:"col text-center step-point-line"},[s("span",{staticClass:"border border-info bg-grass px-4 py-2\n              rounded-pill text-info mb-3 d-inline-block"},[t._v("STEP 2")]),s("p",{staticClass:"text-info h6"},[t._v("確認付款")])]),s("div",{staticClass:"col text-center"},[s("span",{staticClass:"border border-info bg-grass px-4 py-2\n              rounded-pill text-info mb-3 d-inline-block"},[t._v("STEP 3")]),s("p",{staticClass:"text-info h6"},[t._v("完成訂單！")])])])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"col-12"},[s("p",{staticClass:"h4 font-letter text-dark font-weight-bold text-center my-5"},[t._v("來看看最熱門的商品！")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("p",{staticClass:"bg-warning btn"},[s("i",{staticClass:"fas fa-shopping-basket"})])}],o=s("cebc"),i=s("2f62"),n=s("56a6"),c={data:function(){return{coupon_code:"",form:{user:{name:"",email:"",tel:"",address:""},message:""}}},methods:Object(o["a"])({toProductPage:function(t){var e=this;e.$router.push("/product_page/".concat(t))},addtoCart:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.$store.dispatch("cartsModule/addtoCart",{id:t,qty:e})},removeCart:function(t){this.$store.dispatch("cartsModule/removeCart",t)},addCupon:function(){var t=this,e="".concat("https://vue-course-api.hexschool.io","/api/").concat("baiyan","/coupon"),s=this,a={code:s.coupon_code};this.$store.commit("LOADING",!0,{root:!0}),this.$http.post(e,{data:a}).then(function(){t.$store.commit("LOADING",!0,{root:!0}),s.getCart()})},createOrder:function(){var t=this,e="".concat("https://vue-course-api.hexschool.io","/api/").concat("baiyan","/order"),s=this,a=s.form;this.$validator.validate().then(function(r){r&&t.$http.post(e,{data:a}).then(function(t){t.data.success&&s.$router.push("/checkout_2/".concat(t.data.orderId))})})}},Object(i["b"])("cartsModule",["getCart"]),Object(i["b"])("productsModule",["getProducts"])),created:function(){this.getCart(),this.getProducts()},computed:Object(o["a"])({},Object(i["c"])(["isLoading"]),Object(i["c"])("cartsModule",["cartList"]),Object(i["c"])("productsModule",["products"])),components:{Alert:n["a"]}},l=c,d=(s("42b0"),s("2877")),u=Object(d["a"])(l,a,r,!1,null,null,null);e["default"]=u.exports},"42b0":function(t,e,s){"use strict";var a=s("78f4"),r=s.n(a);r.a},"4a2f":function(t,e,s){"use strict";var a=s("dfbe"),r=s.n(a);r.a},"56a6":function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"message-alert"},t._l(t.messages,function(e,a){return s("div",{key:a,staticClass:"alert alert-dismissible",class:"alert-"+e.status},[t._v("\n    "+t._s(e.message)+"\n    "),s("button",{staticClass:"close",attrs:{type:"button","aria-label":"Close"},on:{click:function(e){return t.removeMessage(a)}}},[s("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])}),0)},r=[],o=s("cebc"),i=s("2f62"),n={name:"Alert",data:function(){return{}},methods:{updateMessage:function(t,e){this.$store.dispatch("updateMessage",{message:t,status:e})},removeMessage:function(t){this.$store.dispatch("removeMessages",t)}},computed:Object(o["a"])({},Object(i["c"])(["messages"]))},c=n,l=(s("4a2f"),s("2877")),d=Object(l["a"])(c,a,r,!1,null,null,null);e["a"]=d.exports},"78f4":function(t,e,s){},dfbe:function(t,e,s){}}]);
//# sourceMappingURL=chunk-924ce03c.acdcc9e8.js.map